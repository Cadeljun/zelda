<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Music Player ðŸŽµ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        
        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            background: linear-gradient(90deg, #ff9a9e, #fad0c4, #fad0c4, #a1c4fd);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradient 3s ease infinite;
            background-size: 400% 400%;
        }
        
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        .subtitle {
            font-size: 1.2rem;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        
        .player {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .song-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .album-art {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4, #a1c4fd);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            animation: rotate 20s linear infinite;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .song-details {
            text-align: left;
        }
        
        .song-title {
            font-size: 1.8rem;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .song-artist {
            font-size: 1.2rem;
            opacity: 0.8;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        
        .control-btn:active {
            transform: scale(0.95);
        }
        
        .play-btn {
            width: 80px;
            height: 80px;
            font-size: 2rem;
            background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        }
        
        .play-btn:hover {
            background: linear-gradient(135deg, #ff7b81, #f8c0af);
        }
        
        .progress-container {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            height: 8px;
            border-radius: 4px;
            margin-bottom: 10px;
            cursor: pointer;
        }
        
        .progress-bar {
            background: linear-gradient(90deg, #ff9a9e, #a1c4fd);
            height: 100%;
            border-radius: 4px;
            width: 0%;
            transition: width 0.1s linear;
        }
        
        .time-display {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .volume-control {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        .volume-slider {
            width: 150px;
            -webkit-appearance: none;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            outline: none;
        }
        
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
        }
        
        .playlist {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 30px;
        }
        
        .playlist-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .playlist-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(10px);
        }
        
        .playlist-item.active {
            background: rgba(255, 255, 255, 0.3);
            border-left: 4px solid #ff9a9e;
        }
        
        .playlist-item i {
            font-size: 1.2rem;
            opacity: 0.8;
        }
        
        .playlist-title {
            flex: 1;
            text-align: left;
        }
        
        .playlist-duration {
            opacity: 0.7;
        }
        
        .instructions {
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .back-btn {
            margin-top: 30px;
            padding: 12px 30px;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50px;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-3px);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 154, 158, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(255, 154, 158, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 154, 158, 0); }
        }
        
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .song-info {
                flex-direction: column;
                text-align: center;
            }
            
            .song-details {
                text-align: center;
            }
            
            .controls {
                gap: 15px;
            }
            
            .control-btn {
                width: 50px;
                height: 50px;
            }
            
            .play-btn {
                width: 70px;
                height: 70px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸŽµ Birthday Music Player ðŸŽµ</h1>
        <p class="subtitle">Background music for Zelda's birthday celebration</p>
        
        <div class="player">
            <div class="song-info">
                <div class="album-art pulse">
                    <i class="fas fa-birthday-cake"></i>
                </div>
                <div class="song-details">
                    <div class="song-title" id="songTitle">Happy Birthday (Instrumental)</div>
                    <div class="song-artist" id="songArtist">For Zelda ðŸŽ‚</div>
                </div>
            </div>
            
            <div class="progress-container" id="progressContainer">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="time-display">
                <span id="currentTime">0:00</span>
                <span id="duration">0:00</span>
            </div>
            
            <div class="controls">
                <button class="control-btn" id="prevBtn" title="Previous">
                    <i class="fas fa-step-backward"></i>
                </button>
                <button class="control-btn play-btn" id="playBtn" title="Play">
                    <i class="fas fa-play" id="playIcon"></i>
                </button>
                <button class="control-btn" id="nextBtn" title="Next">
                    <i class="fas fa-step-forward"></i>
                </button>
            </div>
            
            <div class="volume-control">
                <i class="fas fa-volume-down"></i>
                <input type="range" min="0" max="100" value="70" class="volume-slider" id="volumeSlider" title="Volume">
                <i class="fas fa-volume-up"></i>
            </div>
        </div>
        
        <div class="playlist" id="playlist">
            <!-- Playlist will be generated by JavaScript -->
        </div>
        
        <div class="instructions">
            <p><strong>Tip:</strong> Keep this tab open in the background while enjoying the birthday surprise. The music will continue playing.</p>
            <p>Minimize this window or switch tabs - the music will keep playing!</p>
        </div>
        
        <button class="back-btn" id="backBtn" onclick="window.close()">
            <i class="fas fa-arrow-left"></i>
            Close Player (Music will stop)
        </button>
    </div>

    <!-- Hidden audio element -->
    <audio id="audioPlayer" preload="metadata"></audio>

    <script>
        // Music playlist - multiple sources for reliability
        const playlist = [
            {
                title: "Happy Birthday (Instrumental)",
                artist: "Birthday Classics",
                src: "https://assets.mixkit.co/music/preview/mixkit-happy-birthday-to-you-443.mp3",
                duration: "1:45"
            },
            {
                title: "Celebration Time",
                artist: "Party Mix",
                src: "https://assets.mixkit.co/music/preview/mixkit-a-very-happy-birthday-933.mp3",
                duration: "2:10"
            },
            {
                title: "Joyful Celebration",
                artist: "Festive Orchestra",
                src: "https://assets.mixkit.co/music/preview/mixkit-party-happy-469.mp3",
                duration: "2:30"
            },
            {
                title: "Birthday Festivities",
                artist: "Celebration Band",
                src: "https://assets.mixkit.co/music/preview/mixkit-summer-festival-1-479.mp3",
                duration: "2:15"
            },
            {
                title: "Happy Moments",
                artist: "Joyful Ensemble",
                src: "https://assets.mixkit.co/music/preview/mixkit-sunny-happy-522.mp3",
                duration: "1:52"
            }
        ];

        // DOM Elements
        const audioPlayer = document.getElementById('audioPlayer');
        const playBtn = document.getElementById('playBtn');
        const playIcon = document.getElementById('playIcon');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const progressBar = document.getElementById('progressBar');
        const progressContainer = document.getElementById('progressContainer');
        const currentTimeEl = document.getElementById('currentTime');
        const durationEl = document.getElementById('duration');
        const volumeSlider = document.getElementById('volumeSlider');
        const songTitle = document.getElementById('songTitle');
        const songArtist = document.getElementById('songArtist');
        const playlistEl = document.getElementById('playlist');
        const albumArt = document.querySelector('.album-art');

        // Player state
        let currentTrackIndex = 0;
        let isPlaying = false;
        let autoPlayAttempted = false;

        // Initialize player
        function initPlayer() {
            // Set volume
            audioPlayer.volume = volumeSlider.value / 100;
            
            // Load first track
            loadTrack(currentTrackIndex);
            
            // Generate playlist
            generatePlaylist();
            
            // Try to auto-play on user interaction
            document.addEventListener('click', autoPlayMusic, { once: true });
            
            // Update UI
            updatePlayButton();
        }

        // Generate playlist HTML
        function generatePlaylist() {
            playlistEl.innerHTML = '';
            playlist.forEach((track, index) => {
                const item = document.createElement('div');
                item.className = `playlist-item ${index === currentTrackIndex ? 'active' : ''}`;
                item.innerHTML = `
                    <i class="fas fa-music"></i>
                    <div class="playlist-title">
                        <div>${track.title}</div>
                        <small>${track.artist}</small>
                    </div>
                    <div class="playlist-duration">${track.duration}</div>
                `;
                item.addEventListener('click', () => playTrack(index));
                playlistEl.appendChild(item);
            });
        }

        // Load a track
        function loadTrack(index) {
            if (index < 0 || index >= playlist.length) return;
            
            currentTrackIndex = index;
            const track = playlist[index];
            
            // Update audio source
            audioPlayer.src = track.src;
            
            // Update UI
            songTitle.textContent = track.title;
            songArtist.textContent = track.artist;
            
            // Update playlist highlights
            document.querySelectorAll('.playlist-item').forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });
            
            // Preload the audio
            audioPlayer.load();
            
            // When metadata is loaded, update duration
            audioPlayer.addEventListener('loadedmetadata', () => {
                durationEl.textContent = formatTime(audioPlayer.duration);
            });
        }

        // Play/pause toggle
        function togglePlay() {
            if (isPlaying) {
                pauseMusic();
            } else {
                playMusic();
            }
        }

        // Play music
        function playMusic() {
            audioPlayer.play()
                .then(() => {
                    isPlaying = true;
                    updatePlayButton();
                    albumArt.style.animationPlayState = 'running';
                })
                .catch(error => {
                    console.log('Playback failed:', error);
                    // If autoplay is blocked, show instructions
                    if (!autoPlayAttempted) {
                        alert('Please click the play button to start music. Some browsers require manual interaction.');
                    }
                });
        }

        // Auto play music on first interaction
        function autoPlayMusic() {
            autoPlayAttempted = true;
            playMusic();
        }

        // Pause music
        function pauseMusic() {
            audioPlayer.pause();
            isPlaying = false;
            updatePlayButton();
            albumArt.style.animationPlayState = 'paused';
        }

        // Update play button icon
        function updatePlayButton() {
            if (isPlaying) {
                playIcon.className = 'fas fa-pause';
                playBtn.title = 'Pause';
            } else {
                playIcon.className = 'fas fa-play';
                playBtn.title = 'Play';
            }
        }

        // Format time in mm:ss
        function formatTime(seconds) {
            if (isNaN(seconds)) return '0:00';
            
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Update progress bar
        function updateProgress() {
            if (!audioPlayer.duration) return;
            
            const progressPercent = (audioPlayer.currentTime / audioPlayer.duration) * 100;
            progressBar.style.width = `${progressPercent}%`;
            
            currentTimeEl.textContent = formatTime(audioPlayer.currentTime);
        }

        // Set progress on click
        function setProgress(e) {
            const width = this.clientWidth;
            const clickX = e.offsetX;
            const duration = audioPlayer.duration;
            
            if (duration) {
                audioPlayer.currentTime = (clickX / width) * duration;
            }
        }

        // Play next track
        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
            loadTrack(currentTrackIndex);
            if (isPlaying) {
                playMusic();
            }
        }

        // Play previous track
        function prevTrack() {
            currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
            loadTrack(currentTrackIndex);
            if (isPlaying) {
                playMusic();
            }
        }

        // Play specific track
        function playTrack(index) {
            loadTrack(index);
            playMusic();
        }

        // Set volume
        function setVolume() {
            audioPlayer.volume = this.value / 100;
        }

        // Event Listeners
        playBtn.addEventListener('click', togglePlay);
        prevBtn.addEventListener('click', prevTrack);
        nextBtn.addEventListener('click', nextTrack);
        audioPlayer.addEventListener('timeupdate', updateProgress);
        audioPlayer.addEventListener('ended', nextTrack);
        progressContainer.addEventListener('click', setProgress);
        volumeSlider.addEventListener('input', setVolume);

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.code) {
                case 'Space':
                    e.preventDefault();
                    togglePlay();
                    break;
                case 'ArrowLeft':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        audioPlayer.currentTime = Math.max(0, audioPlayer.currentTime - 10);
                    }
                    break;
                case 'ArrowRight':
                    if (e.ctrlKey) {
                        e.preventDefault();
                        audioPlayer.currentTime = Math.min(audioPlayer.duration, audioPlayer.currentTime + 10);
                    }
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    volumeSlider.value = Math.min(100, parseInt(volumeSlider.value) + 10);
                    setVolume.call(volumeSlider);
                    break;
                case 'ArrowDown':
                    e.preventDefault();
                    volumeSlider.value = Math.max(0, parseInt(volumeSlider.value) - 10);
                    setVolume.call(volumeSlider);
                    break;
            }
        });

        // Initialize when page loads
        window.addEventListener('load', initPlayer);

        // Keep music playing even when tab is hidden
        document.addEventListener('visibilitychange', () => {
            if (!document.hidden && isPlaying && audioPlayer.paused) {
                audioPlayer.play().catch(e => console.log('Resume failed:', e));
            }
        });

        // Add a notification when music starts
        audioPlayer.addEventListener('play', () => {
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('Birthday Music Playing', {
                    body: `Now playing: ${playlist[currentTrackIndex].title}`,
                    icon: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">ðŸŽµ</text></svg>'
                });
            }
        });

        // Request notification permission
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        // Expose player control functions globally for main page to call
        window.musicPlayer = {
            play: playMusic,
            pause: pauseMusic,
            next: nextTrack,
            prev: prevTrack,
            setVolume: (vol) => {
                volumeSlider.value = Math.max(0, Math.min(100, vol));
                setVolume.call(volumeSlider);
            },
            getCurrentTrack: () => playlist[currentTrackIndex]
        };
    </script>
</body>
</html> c